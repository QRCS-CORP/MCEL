\doxysection{C\+:/\+Users/stepp/\+Documents/\+Visual Studio 2022/\+Projects/\+C/\+MCEL/\+MCEL/anchor.h File Reference}
\hypertarget{anchor_8h}{}\label{anchor_8h}\index{C:/Users/stepp/Documents/Visual Studio 2022/Projects/C/MCEL/MCEL/anchor.h@{C:/Users/stepp/Documents/Visual Studio 2022/Projects/C/MCEL/MCEL/anchor.h}}


MCEL anchor support header.  


{\ttfamily \#include "{}mcelcommon.\+h"{}}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structmcel__anchor__reference}{mcel\+\_\+anchor\+\_\+reference}}
\begin{DoxyCompactList}\small\item\em The MCEL anchor reference container. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{anchor_8h_a0be78398271deb8500e318f8d8d914d1}\label{anchor_8h_a0be78398271deb8500e318f8d8d914d1} 
\#define {\bfseries MCEL\+\_\+\+ANCHOR\+\_\+\+HASH\+\_\+\+SIZE}~32U
\begin{DoxyCompactList}\small\item\em The MCEL anchor hash size. \end{DoxyCompactList}\item 
\Hypertarget{anchor_8h_aa026d3090dddffe35dfd25c0fde22028}\label{anchor_8h_aa026d3090dddffe35dfd25c0fde22028} 
\#define {\bfseries MCEL\+\_\+\+ANCHOR\+\_\+\+REFERENCE\+\_\+\+VERSION}~0x01U
\begin{DoxyCompactList}\small\item\em The MCEL anchor reference format version. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{anchor_8h_a8f7e18b290a6ad3a7b25ed61dde7251c}{MCEL\+\_\+\+ANCHOR\+\_\+\+REFERENCE\+\_\+\+HEADER\+\_\+\+SIZE}}~8U
\begin{DoxyCompactList}\small\item\em The fixed-\/size header portion of an encoded MCEL anchor reference in bytes. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{anchor_8h_ae4fbba32ffd2215aac281c032d827bc0}\label{anchor_8h_ae4fbba32ffd2215aac281c032d827bc0} 
typedef MCEL\+\_\+\+EXPORT\+\_\+\+API struct mcel\+\_\+anchor\+\_\+reference {\bfseries mcel\+\_\+anchor\+\_\+reference}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
MCEL\+\_\+\+EXPORT\+\_\+\+API bool \mbox{\hyperlink{anchor_8h_a427b3c31a0fe1122a3d6bdfa5cdb8afd}{mcel\+\_\+anchor\+\_\+commit}} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}output, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}chkcommit, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}anchref, size\+\_\+t reflen)
\begin{DoxyCompactList}\small\item\em Compute a MCEL anchor commitment. \end{DoxyCompactList}\item 
MCEL\+\_\+\+EXPORT\+\_\+\+API bool \mbox{\hyperlink{anchor_8h_a61f8ed752399d2daaff3ec5292bbf55a}{mcel\+\_\+anchor\+\_\+reference\+\_\+encode}} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}output, size\+\_\+t outlen, const \mbox{\hyperlink{structmcel__anchor__reference}{mcel\+\_\+anchor\+\_\+reference}} \texorpdfstring{$\ast$}{*}anchor)
\begin{DoxyCompactList}\small\item\em Serialize an anchor reference into a canonical byte string. \end{DoxyCompactList}\item 
MCEL\+\_\+\+EXPORT\+\_\+\+API size\+\_\+t \mbox{\hyperlink{anchor_8h_a2e746d5fd71d40c8edb5ccaffa020478}{mcel\+\_\+anchor\+\_\+reference\+\_\+encoded\+\_\+size}} (size\+\_\+t cidlen, size\+\_\+t reflen)
\begin{DoxyCompactList}\small\item\em Get the required buffer size for an encoded MCEL anchor reference. \end{DoxyCompactList}\item 
MCEL\+\_\+\+EXPORT\+\_\+\+API bool \mbox{\hyperlink{anchor_8h_a5349cc7af6704abe6cdc8629dddb0b57}{mcel\+\_\+anchor\+\_\+reference\+\_\+verify}} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}flags, uint8\+\_\+t \texorpdfstring{$\ast$}{*}type, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}chainid, uint16\+\_\+t \texorpdfstring{$\ast$}{*}chainidlen, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}reference, uint16\+\_\+t \texorpdfstring{$\ast$}{*}reflen, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}input, size\+\_\+t inlen)
\begin{DoxyCompactList}\small\item\em Verify a serialized MCEL anchor reference encoding. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
MCEL anchor support header. 



\label{doc-define-members}
\Hypertarget{anchor_8h_doc-define-members}
\doxysubsection{Macro Definition Documentation}
\Hypertarget{anchor_8h_a8f7e18b290a6ad3a7b25ed61dde7251c}\index{anchor.h@{anchor.h}!MCEL\_ANCHOR\_REFERENCE\_HEADER\_SIZE@{MCEL\_ANCHOR\_REFERENCE\_HEADER\_SIZE}}
\index{MCEL\_ANCHOR\_REFERENCE\_HEADER\_SIZE@{MCEL\_ANCHOR\_REFERENCE\_HEADER\_SIZE}!anchor.h@{anchor.h}}
\doxysubsubsection{\texorpdfstring{MCEL\_ANCHOR\_REFERENCE\_HEADER\_SIZE}{MCEL\_ANCHOR\_REFERENCE\_HEADER\_SIZE}}
{\footnotesize\ttfamily \label{anchor_8h_a8f7e18b290a6ad3a7b25ed61dde7251c} 
\#define MCEL\+\_\+\+ANCHOR\+\_\+\+REFERENCE\+\_\+\+HEADER\+\_\+\+SIZE~8U}



The fixed-\/size header portion of an encoded MCEL anchor reference in bytes. 

version(1) \texorpdfstring{$\vert$}{|} flags(1) \texorpdfstring{$\vert$}{|} type(1) \texorpdfstring{$\vert$}{|} reserved(1) \texorpdfstring{$\vert$}{|} chain\+\_\+len(2) \texorpdfstring{$\vert$}{|} ref\+\_\+len(2) 

\label{doc-func-members}
\Hypertarget{anchor_8h_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{anchor_8h_a427b3c31a0fe1122a3d6bdfa5cdb8afd}\index{anchor.h@{anchor.h}!mcel\_anchor\_commit@{mcel\_anchor\_commit}}
\index{mcel\_anchor\_commit@{mcel\_anchor\_commit}!anchor.h@{anchor.h}}
\doxysubsubsection{\texorpdfstring{mcel\_anchor\_commit()}{mcel\_anchor\_commit()}}
{\footnotesize\ttfamily \label{anchor_8h_a427b3c31a0fe1122a3d6bdfa5cdb8afd} 
MCEL\+\_\+\+EXPORT\+\_\+\+API bool mcel\+\_\+anchor\+\_\+commit (\begin{DoxyParamCaption}\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{output}{, }\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{chkcommit}{, }\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{anchref}{, }\item[{size\+\_\+t}]{reflen}{}\end{DoxyParamCaption})}



Compute a MCEL anchor commitment. 

The anchor commitment binds a checkpoint commitment to an opaque external anchor reference that is canonically encoded by the caller.


\begin{DoxyParams}{Parameters}
{\em output} & A pointer to the output commitment array of size {\ttfamily MCEL\+\_\+\+BLOCK\+\_\+\+HASH\+\_\+\+SIZE}. \\
\hline
{\em chkcommit} & \mbox{[}const\mbox{]} A pointer to the checkpoint commitment array of size {\ttfamily MCEL\+\_\+\+BLOCK\+\_\+\+HASH\+\_\+\+SIZE}. \\
\hline
{\em anchref} & \mbox{[}const\mbox{]} A pointer to the serialized anchor reference bytes. \\
\hline
{\em reflen} & The length of the anchor reference in bytes.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns true if the commitment was generated successfully, false on failure. 
\end{DoxyReturn}
\Hypertarget{anchor_8h_a61f8ed752399d2daaff3ec5292bbf55a}\index{anchor.h@{anchor.h}!mcel\_anchor\_reference\_encode@{mcel\_anchor\_reference\_encode}}
\index{mcel\_anchor\_reference\_encode@{mcel\_anchor\_reference\_encode}!anchor.h@{anchor.h}}
\doxysubsubsection{\texorpdfstring{mcel\_anchor\_reference\_encode()}{mcel\_anchor\_reference\_encode()}}
{\footnotesize\ttfamily \label{anchor_8h_a61f8ed752399d2daaff3ec5292bbf55a} 
MCEL\+\_\+\+EXPORT\+\_\+\+API bool mcel\+\_\+anchor\+\_\+reference\+\_\+encode (\begin{DoxyParamCaption}\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{output}{, }\item[{size\+\_\+t}]{outlen}{, }\item[{const \mbox{\hyperlink{structmcel__anchor__reference}{mcel\+\_\+anchor\+\_\+reference}} \texorpdfstring{$\ast$}{*}}]{anchor}{}\end{DoxyParamCaption})}



Serialize an anchor reference into a canonical byte string. 


\begin{DoxyParams}{Parameters}
{\em output} & A pointer to the output buffer. \\
\hline
{\em outlen} & The length of the output buffer in bytes. \\
\hline
{\em anchor} & \mbox{[}const\mbox{]} A pointer to the anchor reference structure.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns true if the reference was encoded successfully, false on failure. 
\end{DoxyReturn}
\Hypertarget{anchor_8h_a2e746d5fd71d40c8edb5ccaffa020478}\index{anchor.h@{anchor.h}!mcel\_anchor\_reference\_encoded\_size@{mcel\_anchor\_reference\_encoded\_size}}
\index{mcel\_anchor\_reference\_encoded\_size@{mcel\_anchor\_reference\_encoded\_size}!anchor.h@{anchor.h}}
\doxysubsubsection{\texorpdfstring{mcel\_anchor\_reference\_encoded\_size()}{mcel\_anchor\_reference\_encoded\_size()}}
{\footnotesize\ttfamily \label{anchor_8h_a2e746d5fd71d40c8edb5ccaffa020478} 
MCEL\+\_\+\+EXPORT\+\_\+\+API size\+\_\+t mcel\+\_\+anchor\+\_\+reference\+\_\+encoded\+\_\+size (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{cidlen}{, }\item[{size\+\_\+t}]{reflen}{}\end{DoxyParamCaption})}



Get the required buffer size for an encoded MCEL anchor reference. 


\begin{DoxyParams}{Parameters}
{\em cidlen} & The chain identifier length in bytes. \\
\hline
{\em reflen} & The reference length in bytes.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The required encoded size in bytes, or 0 on error. 
\end{DoxyReturn}
\Hypertarget{anchor_8h_a5349cc7af6704abe6cdc8629dddb0b57}\index{anchor.h@{anchor.h}!mcel\_anchor\_reference\_verify@{mcel\_anchor\_reference\_verify}}
\index{mcel\_anchor\_reference\_verify@{mcel\_anchor\_reference\_verify}!anchor.h@{anchor.h}}
\doxysubsubsection{\texorpdfstring{mcel\_anchor\_reference\_verify()}{mcel\_anchor\_reference\_verify()}}
{\footnotesize\ttfamily \label{anchor_8h_a5349cc7af6704abe6cdc8629dddb0b57} 
MCEL\+\_\+\+EXPORT\+\_\+\+API bool mcel\+\_\+anchor\+\_\+reference\+\_\+verify (\begin{DoxyParamCaption}\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{flags}{, }\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{type}{, }\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{chainid}{, }\item[{uint16\+\_\+t \texorpdfstring{$\ast$}{*}}]{chainidlen}{, }\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{reference}{, }\item[{uint16\+\_\+t \texorpdfstring{$\ast$}{*}}]{reflen}{, }\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{input}{, }\item[{size\+\_\+t}]{inlen}{}\end{DoxyParamCaption})}



Verify a serialized MCEL anchor reference encoding. 

This function verifies that an encoded anchor reference is well-\/formed and canonical. It does not perform any network or chain validation.


\begin{DoxyParams}{Parameters}
{\em flags} & A pointer to the returned flags value, can be NULL. \\
\hline
{\em type} & A pointer to the returned type value, can be NULL. \\
\hline
{\em chainid} & A pointer to the returned chain identifier pointer, can be NULL. \\
\hline
{\em chainidlen} & A pointer to the returned chain identifier length, can be NULL. \\
\hline
{\em reference} & A pointer to the returned reference pointer, can be NULL. \\
\hline
{\em reflen} & A pointer to the returned reference length, can be NULL. \\
\hline
{\em input} & \mbox{[}const\mbox{]} A pointer to the encoded anchor reference bytes. \\
\hline
{\em inlen} & The length of the encoded anchor reference in bytes.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns true if the encoding is valid and canonical. 
\end{DoxyReturn}
